/**
 * 일일 마이크로 스토리 생성기
 * 별자리별 신화/전설 기반 짧은 이야기
 * Zeigarnik 효과: "내일 이야기가 궁금하다면..." 으로 재방문 유도
 */

import type { ZodiacSignId } from '@/types';
import { seededRandom, generateContentSeed, selectRandom, signKoreanNames } from './content-pipeline';

interface MicroStoryData {
  title: string;
  content: string;
  moral: string;
  teaser: string; // 내일 이야기 미리보기 (Zeigarnik 효과)
}

/** 별자리별 스토리 풀 */
const storyPools: Record<ZodiacSignId, MicroStoryData[]> = {
  aries: [
    {
      title: '황금 양털을 찾아서',
      content: '옛날 용감한 양이 있었습니다. 모두가 위험하다고 말린 산 너머의 황금 풀밭을, 양은 두려움 없이 향했습니다. 도중에 만난 폭풍도, 절벽도 양을 멈출 수 없었죠.',
      moral: '두려움을 넘어선 곳에 당신만의 황금이 기다립니다.',
      teaser: '내일은 양이 황금 풀밭에서 발견한 뜻밖의 것에 대해...',
    },
    {
      title: '첫 번째 불꽃',
      content: '세상에 불이 없던 시절, 양자리의 수호 정령이 태양에서 첫 번째 불꽃을 훔쳐왔습니다. 그 불꽃은 추위에 떨던 모든 별자리에게 따뜻함을 선물했죠.',
      moral: '당신의 열정은 세상을 따뜻하게 만드는 불꽃입니다.',
      teaser: '내일은 그 불꽃이 만들어낸 예상치 못한 기적에 대해...',
    },
    {
      title: '용기의 씨앗',
      content: '작은 양자리 별이 거대한 어둠 속으로 뛰어들었습니다. "혼자서는 무리야"라는 목소리를 뒤로하고, 별은 자신의 빛을 모아 하나의 등대를 만들었습니다.',
      moral: '한 사람의 용기가 모두를 위한 등대가 됩니다.',
      teaser: '내일은 그 등대가 다른 별들에게 일으킨 변화에 대해...',
    },
    {
      title: '새벽의 전사',
      content: '밤이 가장 길던 날, 양자리의 전사가 먼저 일어나 동쪽을 향해 달렸습니다. 전사의 발걸음이 만든 길을 따라 햇빛이 스며들어, 가장 긴 밤이 가장 짧게 끝났습니다.',
      moral: '누군가 먼저 움직여야 새벽이 옵니다.',
      teaser: '내일은 전사가 동쪽 끝에서 발견한 것에 대해...',
    },
    {
      title: '부서진 갑옷',
      content: '양자리의 기사는 완벽한 갑옷을 입고 싸웠지만 한 번도 이기지 못했습니다. 갑옷을 벗고 맨몸으로 나선 날, 적들이 기사의 눈빛에서 진짜 힘을 보았습니다.',
      moral: '방어를 내려놓을 때 진정한 강함이 드러납니다.',
      teaser: '내일은 기사가 갑옷 없이 마주한 최강의 상대에 대해...',
    },
    {
      title: '화산의 심장',
      content: '양자리의 마을 아래에 잠든 화산이 있었습니다. 모두가 두려워했지만 한 소녀만이 화산에게 말을 걸었습니다. 화산은 분노가 아니라 외로움에 떨고 있었죠.',
      moral: '두려운 것에 다가가면 이해가 시작됩니다.',
      teaser: '내일은 화산과 소녀가 나눈 약속에 대해...',
    },
    {
      title: '번개의 깃발',
      content: '폭풍 속에서 모든 깃발이 찢어졌지만, 양자리가 든 깃발만 펄럭였습니다. 번개가 깃발을 스치자 불꽃 글씨가 나타났습니다: "멈추지 마라."',
      moral: '역경 속에서 받는 메시지가 가장 강력합니다.',
      teaser: '내일은 번개 글씨의 비밀 전문에 대해...',
    },
  ],
  taurus: [
    {
      title: '느린 걸음의 마법',
      content: '모든 별자리가 서둘러 달릴 때, 황소자리만 천천히 걸었습니다. 다른 이들은 비웃었지만, 황소는 길가의 숨겨진 보석들을 하나씩 주워 담았죠.',
      moral: '서두르지 않는 자만이 보는 보물이 있습니다.',
      teaser: '내일은 황소가 모은 보석으로 만든 놀라운 것에 대해...',
    },
    {
      title: '정원사의 비밀',
      content: '황소자리의 현자는 비밀 정원을 가꾸었습니다. 매일 같은 시간에, 같은 정성으로. 백 번째 날, 정원에서 세상에 없던 꽃이 피어났습니다.',
      moral: '꾸준함이 기적을 피워냅니다.',
      teaser: '내일은 그 꽃이 가진 놀라운 능력에 대해...',
    },
    {
      title: '흔들리지 않는 산',
      content: '폭풍이 몰아치는 밤, 모든 나무가 쓰러졌지만 산은 그 자리에 있었습니다. 아침이 되자 산의 품에서 새로운 생명들이 자라나기 시작했죠.',
      moral: '흔들리지 않는 당신이 다른 이들의 안식처가 됩니다.',
      teaser: '내일은 산이 품은 가장 특별한 생명에 대해...',
    },
    {
      title: '씨앗의 인내',
      content: '황소자리의 농부가 심은 씨앗은 3년간 싹을 틔우지 않았습니다. 마을 사람들은 포기하라 했지만, 농부는 매일 물을 주었죠. 4년째 봄, 씨앗은 하늘을 찌르는 거목이 되었습니다.',
      moral: '보이지 않는 곳에서도 성장은 계속됩니다.',
      teaser: '내일은 거목의 열매가 가진 놀라운 효능에 대해...',
    },
    {
      title: '맛의 연금술사',
      content: '황소자리의 요리사는 버려진 재료로 궁중요리를 만들었습니다. 비결은 재료가 아니라 정성이었죠. 왕이 요리사를 찾았을 때, 그는 여전히 시장 한구석에서 요리하고 있었습니다.',
      moral: '진정한 가치는 화려함이 아닌 정성에서 나옵니다.',
      teaser: '내일은 요리사가 왕에게 거절한 이유에 대해...',
    },
    {
      title: '돌의 노래',
      content: '아무도 몰랐지만 돌에도 노래가 있었습니다. 황소자리의 소녀가 돌에 귀를 대고 하루, 이틀, 백 일을 기다리자 마침내 돌이 노래를 불렀습니다.',
      moral: '기다릴 줄 아는 자에게 세상이 비밀을 말합니다.',
      teaser: '내일은 돌의 노래가 전한 고대의 메시지에 대해...',
    },
    {
      title: '뿌리의 왕국',
      content: '거대한 숲의 나무들은 서로 경쟁하는 것처럼 보였지만, 땅 아래에서는 뿌리로 모두 연결되어 있었습니다. 황소자리의 현자만이 그 보이지 않는 왕국을 알고 있었죠.',
      moral: '보이지 않는 연결이 가장 강한 연결입니다.',
      teaser: '내일은 뿌리 왕국의 비밀 회의에 대해...',
    },
  ],
  gemini: [
    {
      title: '두 개의 거울',
      content: '쌍둥이 별이 서로를 비추는 거울을 발견했습니다. 하나의 거울은 과거를, 다른 하나는 미래를 보여주었죠. 쌍둥이는 두 거울 사이에서 현재의 비밀을 발견했습니다.',
      moral: '다양한 관점 사이에서 진정한 답이 보입니다.',
      teaser: '내일은 거울이 보여준 미래의 비밀에 대해...',
    },
    {
      title: '바람의 메신저',
      content: '쌍둥이자리의 정령은 바람을 타고 메시지를 전했습니다. 어느 날, 한 마을의 절망적인 소식을 들은 정령은 바람에 희망의 노래를 실어 보냈죠.',
      moral: '당신의 말 한마디가 누군가의 운명을 바꿉니다.',
      teaser: '내일은 그 노래를 들은 마을에서 벌어진 일에 대해...',
    },
    {
      title: '천 개의 이야기',
      content: '쌍둥이자리의 이야기꾼은 밤마다 별들에게 이야기를 들려주었습니다. 천 번째 이야기를 마친 밤, 별들이 대답하기 시작했죠.',
      moral: '소통을 멈추지 않으면, 우주도 답합니다.',
      teaser: '내일은 별들이 전한 놀라운 메시지에 대해...',
    },
    {
      title: '그림자 쌍둥이',
      content: '쌍둥이자리는 자신의 그림자가 말하는 것을 발견했습니다. 그림자는 낮에 하지 못한 생각들을 밤에 속삭였죠. 둘이 대화를 시작하자, 완전한 자아가 완성되었습니다.',
      moral: '자신의 모든 면을 받아들일 때 진정한 나를 만납니다.',
      teaser: '내일은 그림자가 알려준 비밀 능력에 대해...',
    },
    {
      title: '번역가의 다리',
      content: '서로 다른 언어를 쓰는 두 마을 사이에 쌍둥이자리가 다리를 놓았습니다. 돌이 아니라 말로 만든 다리였죠. 오해가 이해로 바뀌자, 두 마을은 하나가 되었습니다.',
      moral: '소통은 어떤 장벽보다 강한 다리입니다.',
      teaser: '내일은 다리 위에서 일어난 운명적 만남에 대해...',
    },
    {
      title: '나비의 날갯짓',
      content: '쌍둥이자리의 나비가 한쪽 날개를 접자 반대편에서 바람이 불었습니다. 작은 변화가 큰 흐름을 만드는 것을 깨달은 나비는 조심스럽게, 그러나 담대하게 날갯짓했습니다.',
      moral: '작은 행동이 세상을 바꾸는 시작입니다.',
      teaser: '내일은 나비의 날갯짓이 만든 놀라운 결과에 대해...',
    },
    {
      title: '호기심의 열쇠',
      content: '잠긴 방이 백 개인 성에서 쌍둥이자리만이 문을 열 수 있었습니다. 열쇠는 질문이었죠. "왜?"라고 물을 때마다 문이 하나씩 열렸습니다.',
      moral: '질문하는 것을 멈추지 마세요. 답은 항상 문 뒤에 있습니다.',
      teaser: '내일은 마지막 백 번째 문 뒤의 비밀에 대해...',
    },
  ],
  cancer: [
    {
      title: '달의 요람',
      content: '게자리의 수호신은 달빛으로 요람을 만들었습니다. 상처받은 별들이 그 요람에서 쉬면 다시 빛을 되찾았죠. 수호신은 결코 지치지 않았습니다.',
      moral: '당신의 돌봄은 치유의 마법입니다.',
      teaser: '내일은 요람에서 가장 밝게 빛난 별의 이야기에 대해...',
    },
    {
      title: '기억의 조개',
      content: '바닷가에서 특별한 조개를 발견한 게자리. 조개를 귀에 대면 가장 행복했던 기억의 소리가 들렸습니다. 슬픈 날에는 그 소리가 위로가 되었죠.',
      moral: '아름다운 추억은 어떤 폭풍도 견디는 닻입니다.',
      teaser: '내일은 조개가 들려준 가장 특별한 기억에 대해...',
    },
    {
      title: '눈물의 강',
      content: '게자리의 눈물이 모여 강이 되었습니다. 사람들은 그 강물이 메마른 땅을 적시고, 꽃을 피우는 것을 보았죠. 슬픔마저도 생명을 키우는 것이었습니다.',
      moral: '당신의 감정은 세상을 풍요롭게 하는 물입니다.',
      teaser: '내일은 그 강가에서 만난 특별한 존재에 대해...',
    },
    {
      title: '집으로 가는 길',
      content: '먼 여행을 마치고 돌아온 게자리는 집이 더 작아 보였습니다. 하지만 문을 열자 안에는 모든 추억이 빛나고 있었고, 세상 어디보다 넓은 공간이었습니다.',
      moral: '마음을 담은 공간은 우주보다 넓습니다.',
      teaser: '내일은 집 안에서 발견한 잃어버린 보물에 대해...',
    },
    {
      title: '밀물과 썰물',
      content: '게자리의 바다는 밀물과 썰물로 숨을 쉬었습니다. 밀물 때 가져온 선물을 썰물 때 나누어 주었죠. 주고받는 리듬 속에서 바다는 결코 마르지 않았습니다.',
      moral: '나눌수록 채워지는 것이 마음의 법칙입니다.',
      teaser: '내일은 밀물이 가져온 가장 뜻밖의 선물에 대해...',
    },
    {
      title: '달빛 치유사',
      content: '보름달이 뜨면 게자리의 치유사가 나타났습니다. 아픈 마음에 달빛을 비추면 상처가 은빛 흉터로 변했죠. 흉터는 사라지지 않았지만, 가장 아름다운 문양이 되었습니다.',
      moral: '치유란 상처를 지우는 것이 아니라 아름답게 만드는 것입니다.',
      teaser: '내일은 은빛 흉터가 가진 신비로운 힘에 대해...',
    },
    {
      title: '자장가의 힘',
      content: '게자리의 어머니가 부르는 자장가를 들으면 가장 사나운 폭풍도 잠들었습니다. 그 노래에는 마법이 아닌, 한없는 사랑이 담겨 있었기 때문입니다.',
      moral: '사랑을 담은 목소리는 어떤 마법보다 강합니다.',
      teaser: '내일은 자장가를 들은 폭풍이 남긴 것에 대해...',
    },
  ],
  leo: [
    {
      title: '잃어버린 왕관',
      content: '사자자리의 왕은 왕관을 잃었습니다. 왕관 없이도 당당히 서 있는 왕을 보고, 신하들은 깨달았죠. 진정한 왕관은 머리 위가 아니라 마음에 있다는 것을.',
      moral: '진정한 권위는 외부가 아닌 내면에서 옵니다.',
      teaser: '내일은 왕이 왕관 대신 발견한 더 귀한 것에 대해...',
    },
    {
      title: '태양의 심장',
      content: '옛날 태양이 잠시 쉬려 했을 때, 세상은 어둠에 빠졌습니다. 사자자리의 정령이 자신의 심장에 불을 밝혀 세상을 비추었죠.',
      moral: '당신 안의 빛은 어둠을 물리치는 태양입니다.',
      teaser: '내일은 태양이 돌아온 후 정령에게 건넨 선물에 대해...',
    },
    {
      title: '용감한 포효',
      content: '거대한 그림자가 숲을 덮었을 때, 모든 동물이 숨었습니다. 오직 사자만이 그림자를 향해 포효했고, 그 울림에 그림자는 사라졌습니다.',
      moral: '용기 있는 한 마디가 두려움을 물리칩니다.',
      teaser: '내일은 그림자가 진짜 무서워한 것의 정체에 대해...',
    },
    {
      title: '갈기의 비밀',
      content: '사자자리의 갈기에는 별이 숨어 있었습니다. 진심으로 웃을 때마다 갈기에서 별이 하나씩 떨어져 밤하늘을 수놓았죠. 가장 어두운 밤에 가장 많은 별이 떨어졌습니다.',
      moral: '진정한 기쁨은 어둠 속에서 더 빛납니다.',
      teaser: '내일은 마지막 별이 떨어진 후 일어난 일에 대해...',
    },
    {
      title: '왕좌보다 귀한 것',
      content: '사자자리의 왕에게 도전자가 나타나 왕좌를 빼앗았습니다. 왕은 왕좌 대신 백성과 함께 밭을 갈았고, 백성들은 진정한 왕이 누구인지를 알았습니다.',
      moral: '섬기는 자가 진정한 왕입니다.',
      teaser: '내일은 왕좌를 빼앗은 자의 뜻밖의 정체에 대해...',
    },
    {
      title: '무대 위의 고독',
      content: '사자자리의 배우는 무대 위에서 가장 빛났지만, 무대 뒤에서는 가장 외로웠습니다. 어느 날 관객 한 명이 무대 뒤로 찾아와 말했습니다. "당신의 진짜 모습을 보고 싶어요."',
      moral: '가면 뒤의 진심이 가장 큰 감동을 줍니다.',
      teaser: '내일은 배우가 처음으로 보여준 진짜 모습에 대해...',
    },
    {
      title: '사자와 고양이',
      content: '위대한 사자가 길 잃은 새끼 고양이를 만났습니다. 다른 동물들은 왜 왕이 작은 고양이를 돌보느냐 물었죠. 사자는 대답했습니다. "작은 것을 돌보는 것이 진짜 위대함이야."',
      moral: '진정한 강함은 약한 것을 보호하는 것입니다.',
      teaser: '내일은 고양이가 사자에게 가르쳐준 것에 대해...',
    },
  ],
  virgo: [
    {
      title: '별의 도서관',
      content: '처녀자리의 현자는 모든 별의 지식을 모아 우주 도서관을 만들었습니다. 작은 디테일 하나도 놓치지 않았죠. 그 도서관은 길을 잃은 모든 여행자의 등대가 되었습니다.',
      moral: '작은 것에 대한 정성이 큰 지혜를 만듭니다.',
      teaser: '내일은 도서관에서 발견된 비밀 책에 대해...',
    },
    {
      title: '치유의 약초',
      content: '처녀자리의 약사는 남들이 잡초라 부르는 풀에서 약초를 발견했습니다. 세심한 관찰로 발견한 그 약초는 가장 깊은 상처도 치유할 수 있었죠.',
      moral: '남들이 지나치는 곳에서 보물을 찾는 것이 당신의 능력입니다.',
      teaser: '내일은 약초로 치유된 가장 특별한 환자에 대해...',
    },
    {
      title: '완벽한 불완전',
      content: '처녀자리의 도공은 완벽한 그릇을 만들려 했지만 항상 작은 흠이 생겼습니다. 어느 날 그 흠 사이로 빛이 새어 나와, 세상에서 가장 아름다운 그릇이 되었습니다.',
      moral: '불완전함 속에 완벽함이 숨어 있습니다.',
      teaser: '내일은 그 빛이 비춘 곳에서 일어난 기적에 대해...',
    },
    {
      title: '별자리 지도 제작자',
      content: '처녀자리의 학자는 밤마다 별의 위치를 기록했습니다. 천 일째 되는 날, 기록을 펼쳐보니 별들이 하나의 문장을 이루고 있었습니다: "너는 충분하다."',
      moral: '성실함의 끝에 우주가 전하는 메시지가 있습니다.',
      teaser: '내일은 문장 뒤에 숨겨진 두 번째 메시지에 대해...',
    },
    {
      title: '씨앗 감별사',
      content: '처녀자리의 감별사는 수천 개의 씨앗 중에서 가장 좋은 씨앗을 골랐습니다. 비결은 손으로 만져보고, 냄새를 맡고, 햇빛에 비춰보는 것. 시간은 걸렸지만 그 씨앗은 반드시 열매를 맺었죠.',
      moral: '정성 들인 선택은 절대 배신하지 않습니다.',
      teaser: '내일은 감별사가 평생에 한 번 만난 특별한 씨앗에 대해...',
    },
    {
      title: '고장 난 시계',
      content: '마을의 시계가 고장 나자 모두가 시간을 잃었습니다. 처녀자리의 시계공은 3일 밤을 새며 부품 하나하나를 살폈죠. 시계가 다시 돌아가는 소리에 마을 전체가 환호했습니다.',
      moral: '묵묵한 정성이 세상의 시간을 되돌립니다.',
      teaser: '내일은 시계 안에서 발견한 전 시계공의 편지에 대해...',
    },
    {
      title: '정리의 마법사',
      content: '처녀자리가 혼란스러운 방을 정리하면 신기한 일이 벌어졌습니다. 잃어버린 물건, 잊었던 편지, 숨겨진 보물이 나타났죠. 정리란 버리는 것이 아니라 찾는 것이었습니다.',
      moral: '혼란을 정리하면 잃었던 것을 되찾습니다.',
      teaser: '내일은 정리 중 발견한 수수께끼 상자에 대해...',
    },
  ],
  libra: [
    {
      title: '공정한 저울',
      content: '천칭자리의 재판관은 진실과 거짓을 가리는 저울을 가지고 있었습니다. 어느 날 저울이 정확히 수평을 이루었을 때, 세상의 모든 갈등이 잠시 멈추었습니다.',
      moral: '균형이 이루어질 때, 평화가 찾아옵니다.',
      teaser: '내일은 저울이 기울어졌을 때 벌어진 일에 대해...',
    },
    {
      title: '하모니의 정원',
      content: '천칭자리의 음악가는 불협화음도 아름다운 화음으로 바꿀 수 있었습니다. 정원의 꽃들은 그 음악에 맞춰 색을 바꾸며 춤추었죠.',
      moral: '조화를 만드는 것은 세상에서 가장 아름다운 예술입니다.',
      teaser: '내일은 꽃들이 전한 비밀 메시지에 대해...',
    },
    {
      title: '두 날의 칼',
      content: '양쪽의 이야기를 모두 들은 천칭자리는 결정을 내리지 못했습니다. 하지만 그 망설임 속에서 제3의 길을 발견했고, 모두가 만족하는 답을 찾았습니다.',
      moral: '깊은 고민 끝에 최선의 답이 나옵니다.',
      teaser: '내일은 제3의 길에서 만난 예상 밖의 동행자에 대해...',
    },
    {
      title: '깃털과 돌',
      content: '천칭자리의 저울에 깃털과 돌을 올렸습니다. 깃털이 더 무거웠죠. 깃털에는 떠난 이의 마지막 편지가 적혀 있었기 때문입니다.',
      moral: '무게는 질량이 아닌 의미에서 옵니다.',
      teaser: '내일은 편지에 적힌 마지막 한 줄에 대해...',
    },
    {
      title: '무지개 외교관',
      content: '빛과 어둠이 전쟁을 벌일 때, 천칭자리가 그 사이에 서서 무지개를 만들었습니다. 무지개는 빛도 어둠도 아닌, 둘 다인 것. 전쟁은 아름다움 앞에서 멈추었습니다.',
      moral: '대립의 한가운데서 아름다움이 탄생합니다.',
      teaser: '내일은 무지개 너머에 숨겨진 세계에 대해...',
    },
    {
      title: '거울의 방',
      content: '천칭자리가 거울의 방에 들어가자 수많은 자신이 보였습니다. 각각 다른 선택을 한 자신들. 천칭자리는 모든 자신에게 고개를 끄덕이고, 오늘의 자신을 선택했습니다.',
      moral: '모든 가능성을 인정하되, 오늘의 선택에 확신을 가지세요.',
      teaser: '내일은 거울 속 다른 자신이 전해준 조언에 대해...',
    },
    {
      title: '심판관의 쉼',
      content: '오랫동안 옳고 그름을 판단해온 천칭자리는 어느 날 저울을 내려놓았습니다. 판단 없이 바라본 세상은 놀랍도록 아름다웠고, 천칭자리는 미소를 되찾았습니다.',
      moral: '때로는 판단을 멈추는 것이 최고의 지혜입니다.',
      teaser: '내일은 저울을 내려놓은 후 들린 목소리에 대해...',
    },
  ],
  scorpio: [
    {
      title: '불사조의 재',
      content: '전갈자리의 불사조는 스스로 불 속에 뛰어들었습니다. 잿더미 속에서 다시 태어난 불사조는 이전보다 더 강하고 아름다웠습니다.',
      moral: '진정한 변화는 완전한 놓아줌에서 시작됩니다.',
      teaser: '내일은 잿더미 속에서 발견한 보석에 대해...',
    },
    {
      title: '심연의 빛',
      content: '가장 깊은 바다 밑에서, 전갈자리의 잠수부는 빛나는 진주를 발견했습니다. 아무도 가지 않는 깊이에서만 찾을 수 있는 보물이었죠.',
      moral: '가장 깊은 곳에 가장 귀한 것이 있습니다.',
      teaser: '내일은 그 진주가 가진 신비한 힘에 대해...',
    },
    {
      title: '비밀의 문',
      content: '전갈자리만 볼 수 있는 비밀의 문이 있었습니다. 문 너머에는 모든 존재의 진실이 적힌 책이 있었죠. 그 지식은 무겁지만, 강한 자만이 감당할 수 있었습니다.',
      moral: '진실을 감당하는 것이 진정한 강함입니다.',
      teaser: '내일은 책에 적힌 가장 충격적인 진실에 대해...',
    },
    {
      title: '독의 꿀',
      content: '전갈자리의 독에는 비밀이 있었습니다. 소량이면 독이지만, 극소량은 세상에서 가장 달콤한 꿀이 되었죠. 위험한 것과 귀한 것은 종이 한 장 차이였습니다.',
      moral: '위험을 다룰 줄 아는 것이 가장 귀한 능력입니다.',
      teaser: '내일은 독의 꿀을 맛본 자에게 벌어진 일에 대해...',
    },
    {
      title: '허물 벗기',
      content: '전갈자리의 뱀이 오래된 허물을 벗을 때마다 고통스러웠습니다. 하지만 매번 더 강하고 아름다운 비늘이 나타났죠. 가장 고통스러운 허물 벗기 후, 뱀은 용이 되었습니다.',
      moral: '성장의 고통은 변신의 전주곡입니다.',
      teaser: '내일은 용이 된 뱀이 처음 한 일에 대해...',
    },
    {
      title: '심연의 눈',
      content: '전갈자리는 다른 이가 감추는 것을 볼 수 있는 눈을 가졌습니다. 처음엔 고통이었지만, 진실을 보는 눈으로 거짓에 빠진 이들을 구했습니다.',
      moral: '진실을 보는 능력은 무거운 선물입니다.',
      teaser: '내일은 전갈이 진실을 말하지 않기로 한 이유에 대해...',
    },
    {
      title: '밤의 정원사',
      content: '다른 이들이 잠든 밤에 전갈자리는 정원을 가꾸었습니다. 달빛에서만 피는 꽃을 심었죠. 아침이면 사라지는 그 꽃은, 밤의 아름다움을 아는 자만이 볼 수 있었습니다.',
      moral: '남들이 모르는 시간에 피우는 꽃이 가장 특별합니다.',
      teaser: '내일은 달빛 꽃의 향기가 불러온 존재에 대해...',
    },
  ],
  sagittarius: [
    {
      title: '끝없는 지평선',
      content: '사수자리의 탐험가는 지평선 너머를 보겠다고 달렸습니다. 지평선은 계속 물러났지만, 달리는 동안 만난 풍경들이 인생 최고의 선물이 되었죠.',
      moral: '목적지보다 여정에서 진정한 보물을 발견합니다.',
      teaser: '내일은 탐험가가 지평선에서 마침내 본 것에 대해...',
    },
    {
      title: '진실의 화살',
      content: '사수자리의 궁수는 한 번도 과녁을 빗나간 적이 없었습니다. 비밀은 화살에 진심을 담았기 때문이죠. 진심으로 쏜 화살은 반드시 마음에 닿습니다.',
      moral: '진심은 언제나 목표에 도달합니다.',
      teaser: '내일은 화살이 도달한 예상치 못한 곳에 대해...',
    },
    {
      title: '별의 지도',
      content: '길을 잃은 사수자리는 하늘을 올려다보았습니다. 별들이 하나둘 연결되어 지도가 되었고, 그 지도는 아직 아무도 가지 않은 길을 가리키고 있었습니다.',
      moral: '길을 잃을 때 하늘을 보면 새로운 길이 보입니다.',
      teaser: '내일은 새로운 길에서 만난 신비로운 존재에 대해...',
    },
    {
      title: '경계 너머의 세계',
      content: '세상의 끝에 "여기서 더 가면 안 됩니다"라는 표지판이 서 있었습니다. 사수자리만이 웃으며 한 발짝 더 내디뎠고, 표지판 뒤에 새로운 세계가 펼쳐졌습니다.',
      moral: '한계란 넘어서야 할 초대장입니다.',
      teaser: '내일은 새 세계의 주민들이 전한 경고에 대해...',
    },
    {
      title: '불화살 축제',
      content: '매년 사수자리는 불화살을 하늘에 쏘았습니다. 화살은 별이 되어 밤하늘을 수놓았죠. 가장 멀리 쏜 해, 화살은 새 별자리가 되어 길 잃은 여행자들의 길잡이가 되었습니다.',
      moral: '당신이 쏜 열정의 화살이 누군가의 이정표가 됩니다.',
      teaser: '내일은 새 별자리가 가리킨 방향에 대해...',
    },
    {
      title: '웃음의 약',
      content: '슬픔의 전염병이 돌았을 때, 사수자리의 광대가 나타났습니다. 그의 웃음소리에는 마법이 있었죠. 웃음이 퍼질수록 슬픔은 사라졌고, 마을은 다시 노래를 불렀습니다.',
      moral: '유머는 가장 강력한 치유제입니다.',
      teaser: '내일은 광대의 웃음 뒤에 숨겨진 눈물에 대해...',
    },
    {
      title: '자유의 대가',
      content: '사수자리의 말은 세상에서 가장 빨랐습니다. 하지만 가장 빠른 순간에 말이 물었습니다. "어디로 가는 거야?" 사수자리는 멈추어 처음으로 방향을 생각했습니다.',
      moral: '자유에도 방향이 필요합니다.',
      teaser: '내일은 말이 사수자리에게 가르쳐준 비밀에 대해...',
    },
  ],
  capricorn: [
    {
      title: '산의 약속',
      content: '염소자리는 가장 높은 산에 오르겠다고 약속했습니다. 매일 한 걸음씩, 폭풍이 와도, 안개가 끼어도 멈추지 않았죠. 정상에서 본 풍경은 말로 표현할 수 없었습니다.',
      moral: '한 걸음씩 꾸준히 오르면 정상은 반드시 옵니다.',
      teaser: '내일은 정상에서 발견한 놀라운 비밀에 대해...',
    },
    {
      title: '시간의 건축가',
      content: '염소자리의 건축가는 천 년이 걸리는 탑을 짓기 시작했습니다. 사람들은 비웃었지만, 한 세대가 지나자 탑의 아름다움에 모두가 경탄했습니다.',
      moral: '시간을 투자하는 것이 가장 현명한 건축입니다.',
      teaser: '내일은 탑이 완성되었을 때 일어난 기적에 대해...',
    },
    {
      title: '겨울의 선물',
      content: '추운 겨울, 다른 별자리들은 봄을 기다렸지만, 염소자리는 겨울의 고요함 속에서 가장 깊은 깨달음을 얻었습니다.',
      moral: '어려운 시기야말로 가장 큰 성장의 기회입니다.',
      teaser: '내일은 겨울이 염소자리에게 건넨 비밀 선물에 대해...',
    },
    {
      title: '돌계단의 비밀',
      content: '염소자리가 깎은 돌계단은 천 개였습니다. 각 계단에는 한 글자씩 새겨져 있었죠. 정상에 오른 자만이 천 글자를 이어 읽을 수 있었는데, 그것은 세상의 진리였습니다.',
      moral: '한 계단씩 올라야만 읽을 수 있는 진리가 있습니다.',
      teaser: '내일은 천 번째 계단 너머에 있던 것에 대해...',
    },
    {
      title: '대장장이의 검',
      content: '염소자리의 대장장이는 천 번을 두드려 검을 만들었습니다. 다른 이들은 백 번이면 충분하다 했지만, 천 번째 망치질에 검이 노래를 불렀습니다.',
      moral: '남들이 멈추는 곳에서 계속하면 작품이 됩니다.',
      teaser: '내일은 노래하는 검이 선택한 주인에 대해...',
    },
    {
      title: '뿌리 깊은 나무',
      content: '바람이 불 때 다른 나무는 휘어졌지만, 염소자리의 나무만은 꿋꿋했습니다. 비결은 보이는 높이만큼 깊은 뿌리. 성장은 위로만이 아니라 아래로도 하는 것이었습니다.',
      moral: '보이지 않는 곳의 노력이 당신을 지탱합니다.',
      teaser: '내일은 뿌리가 닿은 지하 세계에 대해...',
    },
    {
      title: '느린 거북의 승리',
      content: '염소자리의 거북은 결승선에 마지막으로 도착했습니다. 하지만 결승선 너머에 진짜 보물이 있다는 것을 아는 건 거북뿐이었죠. 다른 이들은 결승선에서 멈추었습니다.',
      moral: '끝이라 여겨지는 곳에서 한 걸음 더가 승리입니다.',
      teaser: '내일은 결승선 너머의 보물의 정체에 대해...',
    },
  ],
  aquarius: [
    {
      title: '미래에서 온 편지',
      content: '물병자리는 미래에서 편지를 받았습니다. 편지에는 "지금 당신이 꿈꾸는 것이 모두 현실이 됩니다"라고 적혀 있었죠. 물병자리는 더 크게 꿈꾸기로 했습니다.',
      moral: '상상하는 것이 미래를 만드는 첫 걸음입니다.',
      teaser: '내일은 편지에 숨겨진 비밀 메시지에 대해...',
    },
    {
      title: '물병의 물',
      content: '물병자리의 물은 특별했습니다. 메마른 땅에 뿌리면 오래된 씨앗이 싹을 틔웠죠. 아무도 살지 않던 사막이 숲이 되었습니다.',
      moral: '당신의 아이디어가 불모지를 낙원으로 바꿉니다.',
      teaser: '내일은 그 숲에서 자란 가장 신기한 나무에 대해...',
    },
    {
      title: '규칙을 깨는 자',
      content: '모든 별이 정해진 궤도를 따를 때, 물병자리만 자신의 궤도를 만들었습니다. 처음엔 혼란스러웠지만, 그 새로운 길이 다른 별들에게도 자유를 주었습니다.',
      moral: '규칙을 깨는 것이 새로운 규칙을 만듭니다.',
      teaser: '내일은 새로운 궤도에서 만난 미지의 세계에 대해...',
    },
    {
      title: '발명가의 실패작',
      content: '물병자리의 발명가는 999번 실패했습니다. 사람들은 포기하라 했지만, 1000번째 시도에서 세상을 바꾸는 발명이 탄생했죠. 비결은 매번 다른 방식으로 실패한 것이었습니다.',
      moral: '같은 실패를 반복하지 않는 것이 혁신의 비결입니다.',
      teaser: '내일은 그 발명이 세상에 가져온 변화에 대해...',
    },
    {
      title: '빗속의 춤',
      content: '다른 이들이 비를 피할 때, 물병자리는 빗속에서 춤을 추었습니다. 비가 그치자 물병자리 주위에만 무지개가 피었고, 사람들은 비로소 비의 아름다움을 알았습니다.',
      moral: '남들이 피하는 것을 즐길 때 기적이 일어납니다.',
      teaser: '내일은 무지개 끝에서 만난 존재에 대해...',
    },
    {
      title: '시간 여행자의 병',
      content: '물병자리의 병에 시간을 담을 수 있었습니다. 행복한 순간을 병에 담아두었다가, 힘든 날에 마개를 열면 그 순간이 흘러나왔죠.',
      moral: '행복한 순간을 기억하는 것이 가장 좋은 시간 여행입니다.',
      teaser: '내일은 병에서 흘러나온 예상치 못한 시간에 대해...',
    },
    {
      title: '외계 신호',
      content: '물병자리만 들을 수 있는 신호가 우주에서 왔습니다. 해독하는 데 7일이 걸렸고, 메시지는 단 한 줄이었습니다: "다르다는 것은 축복이다."',
      moral: '우주도 당신의 독특함을 축하합니다.',
      teaser: '내일은 신호를 보낸 존재의 정체에 대해...',
    },
  ],
  pisces: [
    {
      title: '꿈의 바다',
      content: '물고기자리는 꿈과 현실의 경계에 사는 바다에서 헤엄쳤습니다. 그 바다에서는 상상하는 모든 것이 형태를 가졌죠. 가장 아름다운 꿈이 가장 아름다운 현실이 되었습니다.',
      moral: '꿈을 꾸는 것이 현실을 창조하는 것입니다.',
      teaser: '내일은 꿈의 바다에서 만난 신비로운 존재에 대해...',
    },
    {
      title: '눈물의 진주',
      content: '물고기자리의 눈물은 바다에 떨어지면 진주가 되었습니다. 세상의 아픔을 느낄 때마다 아름다운 보석이 만들어졌죠.',
      moral: '당신의 감수성은 세상에서 가장 귀한 보석을 만듭니다.',
      teaser: '내일은 가장 큰 진주가 가진 놀라운 비밀에 대해...',
    },
    {
      title: '두 마리 물고기',
      content: '서로 반대 방향으로 헤엄치는 두 마리 물고기는 결코 떨어지지 않았습니다. 하나는 과거를, 하나는 미래를 향했지만, 둘을 잇는 끈이 현재의 힘이었죠.',
      moral: '과거와 미래를 잇는 현재에 당신의 힘이 있습니다.',
      teaser: '내일은 끈이 끊어질 뻔한 위기의 순간에 대해...',
    },
    {
      title: '물 위의 도시',
      content: '물고기자리가 꿈꾼 도시는 물 위에 떠 있었습니다. 사람들은 불가능하다 했지만, 꿈이 너무 선명해서 바다가 스스로 도시를 들어 올렸습니다.',
      moral: '충분히 선명한 꿈은 현실이 스스로 따라갑니다.',
      teaser: '내일은 물 위의 도시 주민들의 비밀에 대해...',
    },
    {
      title: '노래하는 산호',
      content: '깊은 바다에서 물고기자리는 노래하는 산호를 발견했습니다. 산호의 노래를 듣는 동안 시간이 멈추고, 가장 깊은 마음의 소리가 들렸습니다.',
      moral: '고요히 귀를 기울이면 자신의 진짜 목소리가 들립니다.',
      teaser: '내일은 산호가 불러준 잊혀진 노래에 대해...',
    },
    {
      title: '투명한 물고기',
      content: '물고기자리는 투명해질 수 있었습니다. 남들의 눈에 보이지 않을 때, 세상의 가장 솔직한 모습을 볼 수 있었죠. 그리고 보이지 않는 아픔도 느낄 수 있었습니다.',
      moral: '공감은 보이지 않는 것을 보는 능력입니다.',
      teaser: '내일은 투명해진 물고기가 발견한 숨겨진 세계에 대해...',
    },
    {
      title: '조수의 약속',
      content: '바다가 떠나도 반드시 돌아온다는 것을 물고기자리는 알고 있었습니다. 가장 큰 썰물 후에 가장 큰 밀물이 오듯이. 기다림을 아는 물고기자리에게 바다는 매번 더 많은 선물을 가져왔습니다.',
      moral: '떠나는 것은 더 크게 돌아오기 위한 준비입니다.',
      teaser: '내일은 가장 큰 밀물이 가져온 보물에 대해...',
    },
  ],
};

/** 오늘의 마이크로 스토리 생성 */
export function generateDailyMicroStory(
  signId: ZodiacSignId,
  date: Date = new Date()
): MicroStoryData {
  const seed = generateContentSeed(signId, date, 'microstory');
  const random = seededRandom(seed);
  const stories = storyPools[signId];
  return selectRandom(stories, random);
}

/** 내일 스토리 티저 생성 (Zeigarnik 효과) */
export function getTomorrowTeaser(
  signId: ZodiacSignId,
  date: Date = new Date()
): string {
  const tomorrow = new Date(date);
  tomorrow.setDate(tomorrow.getDate() + 1);
  const story = generateDailyMicroStory(signId, tomorrow);
  return story.teaser;
}

/** 별자리별 스토리 수 */
export function getStoryCount(signId: ZodiacSignId): number {
  return storyPools[signId].length;
}
